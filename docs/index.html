<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temporal Kit - Modern Functional Utilities for Temporal API</title>
    <meta name="description" content="A modern, functional utility library for the Temporal API. Lightweight (~11KB), tree-shakable, and TypeScript-first. Experiment with Temporal today.">
    <meta name="keywords" content="temporal, temporal-api, javascript, typescript, date-time, functional, tree-shakable, temporal-polyfill">
    <meta name="author" content="KristjanESPERANTO">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%233182ce' stroke='%23fff' stroke-width='3'/><line x1='50' y1='50' x2='50' y2='25' stroke='%23fff' stroke-width='4' stroke-linecap='round'/><line x1='50' y1='50' x2='70' y2='50' stroke='%23fff' stroke-width='3' stroke-linecap='round'/><circle cx='50' cy='50' r='4' fill='%23fff'/></svg>">
    
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f0f4f8;
            --bg-tertiary: #e2e8f0;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-tertiary: #718096;
            --border-color: #cbd5e0;
            --accent-primary: #3182ce;
            --accent-hover: #2c5282;
            --code-bg: #2d3748;
            --code-border: #4a5568;
            --code-text: #e2e8f0;
            --success-bg: #c6f6d5;
            --success-text: #22543d;
            --warning-bg: #fef5e7;
            --warning-text: #744210;
        }
        
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1f2937;
                --bg-secondary: #111827;
                --bg-tertiary: #374151;
                --text-primary: #f9fafb;
                --text-secondary: #d1d5db;
                --text-tertiary: #9ca3af;
                --border-color: #374151;
                --accent-primary: #60a5fa;
                --accent-hover: #93c5fd;
                --code-bg: #0d1117;
                --code-border: #30363d;
                --code-text: #c9d1d9;
                --success-bg: #1e4620;
                --success-text: #7ee787;
                --warning-bg: #4d3800;
                --warning-text: #f0bf4c;
            }
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-secondary);
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
        }
        
        header {
            text-align: center;
            padding: 4rem 0 3rem;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            margin: -2rem -2rem 2rem -2rem;
            position: relative;
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            header {
                padding: 2rem 1rem 2rem;
                margin: -1rem -1rem 1rem -1rem;
            }
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3182ce 0%, #805ad5 100%);
        }

        .clock-background {
            position: absolute;
            top: 50%;
            right: 5%;
            transform: translateY(-50%);
            width: 180px;
            height: 180px;
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
        }

        @media (max-width: 768px) {
            .clock-background {
                width: 120px;
                height: 120px;
                right: 50%;
                transform: translate(50%, -50%);
            }
        }

        .clock-face {
            width: 100%;
            height: 100%;
            border: 3px solid currentColor;
            border-radius: 50%;
            position: relative;
        }

        .clock-face::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background: currentColor;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .clock-hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom center;
            background: currentColor;
            border-radius: 2px;
        }

        .hour-hand {
            width: 3px;
            height: 35%;
            transform: translateX(-50%) rotate(var(--hour-rotation));
        }

        .minute-hand {
            width: 2px;
            height: 45%;
            transform: translateX(-50%) rotate(var(--minute-rotation));
        }

        .second-hand {
            width: 2px;
            height: 48%;
            transform: translateX(-50%) rotate(var(--second-rotation));
            background: #dc2626;
            opacity: 1;
        }

        @media (prefers-color-scheme: dark) {
            .second-hand {
                background: #f87171;
            }
        }

        .digital-time {
            position: absolute;
            bottom: 22%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1rem;
            font-weight: 600;
            font-family: 'SF Mono', 'Monaco', monospace;
            color: currentColor;
            text-align: center;
            line-height: 1.3;
        }

        .digital-date {
            font-size: 0.75rem;
            font-weight: 700;
            opacity: 0.9;
            margin-top: 0.15rem;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.75rem;
            }
        }
        
        h1::before {
            content: 'üïê';
            margin-right: 0.5rem;
            font-size: 2rem;
        }
        
        @media (max-width: 768px) {
            h1::before {
                font-size: 1.5rem;
            }
        }
        
        .tagline {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            font-weight: 400;
        }
        
        @media (max-width: 768px) {
            .tagline {
                font-size: 1rem;
            }
        }
        
        .status {
            display: inline-block;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            padding: 0.375rem 0.875rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid var(--border-color);
        }
        
        .main-content {
            background: var(--bg-primary);
            border-radius: 0.5rem;
            padding: 2.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.06);
        }
        
        @media (max-width: 768px) {
            .main-content {
                padding: 1.5rem;
            }
        }
        
        @media (prefers-color-scheme: dark) {
            .main-content {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.2);
            }
        }
        
        .playground {
            background: var(--bg-primary);
            border-radius: 0.5rem;
            padding: 2.5rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.06);
        }
        
        @media (max-width: 768px) {
            .playground {
                padding: 1.5rem;
            }
        }
        
        @media (prefers-color-scheme: dark) {
            .playground {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.2);
            }
        }
        
        h2 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.01em;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin: 2.5rem 0;
        }

        @media (min-width: 640px) {
            .feature-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .feature-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .feature {
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .feature:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.1);
        }
        
        .feature h3 {
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .feature p {
            color: var(--text-secondary);
        }

        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .api-category h4 {
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .api-category ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .api-category li {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
        }

        .api-category code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            color: var(--accent-primary);
            background: var(--bg-tertiary);
            padding: 0.1rem 0.3rem;
            border-radius: 0.25rem;
            font-size: 0.85em;
        }
        
        .install-box {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.25rem 1.5rem;
            border-radius: 0.5rem;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            margin: 1.5rem 0;
            position: relative;
            border: 1px solid var(--code-border);
        }
        
        @media (max-width: 768px) {
            .install-box {
                padding: 1rem 1rem 1rem 1rem;
            }
            
            .install-box code {
                font-size: 0.85rem;
                display: block;
                padding-right: 70px;
            }
        }
        
        .install-box code {
            color: #90cdf4;
            font-size: 0.95rem;
        }
        
        .copy-btn {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 0.5rem 0.875rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: background 0.2s;
        }
        
        .copy-btn:hover {
            background: var(--accent-hover);
        }
        
        .browser-check {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.9375rem;
        }
        
        .browser-check.supported {
            background: var(--success-bg);
            color: var(--success-text);
            border: 1px solid var(--success-text);
        }
        
        .browser-check.unsupported {
            background: var(--warning-bg);
            color: var(--warning-text);
            border: 1px solid var(--warning-text);
        }
        
        .example-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .example-card {
                padding: 1rem;
            }
        }
        
        .example-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .example-header {
                flex-direction: column;
                align-items: stretch;
            }
        }
        
        .example-title {
            flex: 1;
        }
        
        .example-title h3 {
            color: var(--text-primary);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .example-title p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.5;
        }
        
        .rerun-btn {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 0.625rem 1.25rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: background 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        @media (max-width: 768px) {
            .rerun-btn {
                width: 100%;
            }
        }
        
        .rerun-btn:hover {
            background: var(--accent-hover);
        }
        
        .code-output-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .code-output-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .code-block, .output-block {
            min-width: 0;
            display: flex;
            flex-direction: column;
        }
        
        .code-block h4, .output-block h4 {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .code-content, .output-content {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.25rem;
            border-radius: 0.375rem;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            white-space: pre-wrap;
            border: 1px solid var(--code-border);
            font-size: 0.875rem;
            line-height: 1.6;
            overflow-x: auto;
            flex: 1;
        }

        .comment {
            color: #6a9955;
            font-style: italic;
        }

        .links-section {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-top: 0;
            padding-top: 0;
        }

        @media (max-width: 768px) {
            .links-section {
                flex-wrap: wrap;
                gap: 0.75rem 1rem;
                justify-content: center;
            }
            
            .links-section > span {
                display: none;
            }
        }

        .link-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9375rem;
            transition: color 0.2s;
        }

        .link-item:hover {
            color: var(--accent-primary);
        }

        .link-item .icon {
            font-size: 1.25rem;
        }
        
        footer {
            text-align: center;
            color: var(--text-tertiary);
            padding: 3rem 0 2rem;
            margin-top: 3rem;
            border-top: 1px solid var(--border-color);
        }
        
        a {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        a:hover {
            color: var(--accent-hover);
        }
        
        footer a {
            color: var(--text-secondary);
            font-weight: 400;
        }
        
        footer a:hover {
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="clock-background" id="clockBg">
                <div class="clock-face">
                    <div class="clock-hand hour-hand"></div>
                    <div class="clock-hand minute-hand"></div>
                    <div class="clock-hand second-hand"></div>
                    <div class="digital-time" id="digitalTime">
                        <div id="timeDisplay">00:00:00</div>
                        <div class="digital-date" id="dateDisplay">2025-01-01</div>
                    </div>
                </div>
            </div>
            <h1 style="position: relative; z-index: 1;">Temporal Kit</h1>
            <p class="tagline" style="position: relative; z-index: 1;">Functional utilities for JavaScript's Temporal API</p>
        </header>
        
        <div class="main-content">
            <h2>Ready for the future of JavaScript dates</h2>
            <p>A lightweight, tree-shakable library for JavaScript's <strong>Temporal API</strong>. Functional design, full TypeScript support, and zero dependencies.</p>
            
            <div class="install-box">
                <button class="copy-btn" onclick="copyInstall()">Copy</button>
                <code>npm install temporal-kit</code>
            </div>
            
            <div class="feature-grid">
                <div class="feature">
                    <h3>Functional & Composable</h3>
                    <p>Build complex logic with <code>pipe</code> and <code>compose</code>. Data-last design for better readability.</p>
                </div>
                <div class="feature">
                    <h3>Tree-Shakable</h3>
                    <p>Modular architecture. Import only what you need, keep your bundle size tiny.</p>
                </div>
                <div class="feature">
                    <h3>Type-Safe</h3>
                    <p>Written in TypeScript with strict mode. Catch errors at compile time, not runtime.</p>
                </div>
                <div class="feature">
                    <h3>Future-Proof</h3>
                    <p>Built directly on the ECMAScript Temporal API. No proprietary date objects to learn.</p>
                </div>
                <div class="feature">
                    <h3>Locale-Aware</h3>
                    <p>Leverages <code>Intl</code> for robust, localized date formatting and relative time strings.</p>
                </div>
                <div class="feature">
                    <h3>Universal</h3>
                    <p>Runs anywhere JavaScript runs. Works with native Temporal or any standard polyfill.</p>
                </div>
            </div>

            <div style="margin-top: 4rem; padding-top: 3rem; border-top: 1px solid var(--border-color);">
                <h3 style="margin-bottom: 0.5rem;">API Overview</h3>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">A quick look at the available utilities.</p>
                
                <div class="api-grid">
                    <div class="api-category">
                        <h4>üîç Comparison & Range</h4>
                        <ul>
                            <li><code>isBefore</code> <code>isAfter</code> compare dates</li>
                            <li><code>isSame</code> <code>isBetween</code> equality & range</li>
                            <li><code>clamp</code> <code>isWeekend</code> checks</li>
                        </ul>
                    </div>

                    <div class="api-category">
                        <h4>üßÆ Arithmetic</h4>
                        <ul>
                            <li><code>add</code> <code>subtract</code> add/sub time</li>
                            <li><code>startOf</code> <code>endOf</code> start/end unit</li>
                            <li><code>nextDay</code> <code>addBusinessDays</code> helpers</li>
                        </ul>
                    </div>

                    <div class="api-category">
                        <h4>üõ°Ô∏è Guards & Types</h4>
                        <ul>
                            <li><code>isPlainDate</code> <code>isInstant</code> <code>isDuration</code></li>
                            <li><code>isZonedDateTime</code> <code>isPlainYearMonth</code></li>
                            <li><code>isPlainMonthDay</code> <code>isDateLike</code></li>
                        </ul>
                    </div>

                    <div class="api-category">
                        <h4>üåê Formatting & Convert</h4>
                        <ul>
                            <li><code>format</code> localized string</li>
                            <li><code>formatRelative</code> relative time</li>
                            <li><code>toZonedDateTime</code> convert zone</li>
                        </ul>
                    </div>

                    <div class="api-category">
                        <h4>üì¶ Collections</h4>
                        <ul>
                            <li><code>sortAsc</code> <code>sortDesc</code> sort dates</li>
                            <li><code>closestTo</code> find nearest</li>
                            <li><code>eachDayOfInterval</code> make range</li>
                        </ul>
                    </div>

                    <div class="api-category">
                        <h4>üîß Functional</h4>
                        <ul>
                            <li><code>pipe</code> chain functions</li>
                            <li><code>compose</code> combine functions</li>
                            <li><code>now</code> <code>fromISO</code> helpers</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="playground">
            <h2>Live Playground</h2>
            
            <div id="browserCheck" class="browser-check"></div>
            
            <p>Try Temporal Kit directly in your browser. Each example runs independently:</p>
            
            <div id="examplesContainer"></div>
        </div>
    </div>
    
    <footer>
        <div class="links-section">
            <a href="https://www.npmjs.com/package/temporal-kit" target="_blank" class="link-item">
                <span class="icon">üì¶</span>
                <span>npm</span>
            </a>
            <span style="color: var(--border-color);">‚Ä¢</span>
            <a href="https://github.com/KristjanESPERANTO/temporal-kit" target="_blank" class="link-item">
                <span class="icon">üìö</span>
                <span>GitHub</span>
            </a>
            <span style="color: var(--border-color);">‚Ä¢</span>
            <a href="https://github.com/KristjanESPERANTO/temporal-kit/blob/main/docs/API.md" target="_blank" class="link-item">
                <span class="icon">üìñ</span>
                <span>API Docs</span>
            </a>
            <span style="color: var(--border-color);">‚Ä¢</span>
            <a href="https://github.com/KristjanESPERANTO/temporal-kit/tree/main/examples" target="_blank" class="link-item">
                <span class="icon">üí°</span>
                <span>Examples</span>
            </a>
            <span style="color: var(--border-color);">‚Ä¢</span>
            <a href="https://github.com/KristjanESPERANTO/temporal-kit/blob/main/LICENSE" target="_blank" class="link-item">
                <span class="icon">‚öñÔ∏è</span>
                <span>MIT License</span>
            </a>
        </div>
    </footer>
    
    <script>
        // Update clock (runs immediately, before module loading)
        function updateClock() {
            const now = new Date();
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            
            const hourRotation = (hours * 30) + (minutes * 0.5);
            const minuteRotation = minutes * 6;
            const secondRotation = seconds * 6;
            
            const clockBg = document.getElementById('clockBg');
            if (clockBg) {
                clockBg.style.setProperty('--hour-rotation', `${hourRotation}deg`);
                clockBg.style.setProperty('--minute-rotation', `${minuteRotation}deg`);
                clockBg.style.setProperty('--second-rotation', `${secondRotation}deg`);
            }

            // Update digital time
            const timeDisplay = document.getElementById('timeDisplay');
            const dateDisplay = document.getElementById('dateDisplay');
            if (timeDisplay) {
                const h = String(now.getHours()).padStart(2, '0');
                const m = String(now.getMinutes()).padStart(2, '0');
                const s = String(now.getSeconds()).padStart(2, '0');
                timeDisplay.textContent = `${h}:${m}:${s}`;
            }
            if (dateDisplay) {
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                dateDisplay.textContent = `${year}-${month}-${day}`;
            }
        }
        
        // Start clock when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                updateClock();
                setInterval(updateClock, 1000);
            });
        } else {
            updateClock();
            setInterval(updateClock, 1000);
        }
    </script>

    <script type="module">

        // Check Temporal support
        const hasNativeTemporal = typeof Temporal !== 'undefined';
        const browserCheck = document.getElementById('browserCheck');
        
        if (hasNativeTemporal) {
            browserCheck.className = 'browser-check supported';
            browserCheck.innerHTML = '‚úÖ Your browser supports native Temporal! Running without polyfill.';
        } else {
            browserCheck.className = 'browser-check unsupported';
            browserCheck.innerHTML = '‚ö†Ô∏è Your browser doesn\'t support Temporal yet. Loading polyfill...';
            // Import polyfill
            await import('https://cdn.jsdelivr.net/npm/temporal-polyfill@0.3.0/global.js');
        }
        
        // Import temporal-kit
        let temporalKit;
        
        // Detect environment and use appropriate import
        const isGitHubPages = window.location.hostname.includes('github.io');
        const isLocalDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        
        try {
            if (isGitHubPages) {
                // Production: GitHub Pages has temporal-kit.js in same folder
                temporalKit = await import('./temporal-kit.js');
            } else if (isLocalDev) {
                // Local dev: use dist folder
                temporalKit = await import('../dist/polyfilled.js');
            } else {
                // Fallback to CDN
                temporalKit = await import('https://cdn.jsdelivr.net/npm/temporal-kit@0.2.0/dist/polyfilled.js');
            }
        } catch (e) {
            console.warn('Primary import failed, falling back to CDN:', e);
            temporalKit = await import('https://cdn.jsdelivr.net/npm/temporal-kit@0.2.0/dist/polyfilled.js');
        }

        const { isPlainDate, isZonedDateTime, isInstant, add, startOf, pipe, isBetween, clamp, nextDay, formatRelative, sortAsc, closestTo, addBusinessDays, isWeekend } = temporalKit;
        
        // Store for global access
        window.temporalKit = { isPlainDate, isZonedDateTime, isInstant, add, startOf, pipe, isBetween, clamp, nextDay, formatRelative, sortAsc, closestTo, addBusinessDays, isWeekend };
    
        // Examples code and rendering - moved into module script to avoid race condition
        const exampleCode = {
            relative: `import { formatRelative } from 'temporal-kit';

const today = Temporal.Now.plainDateISO();

const yesterday = today.subtract({ days: 1 });
const lastWeek = today.subtract({ days: 7 });
const tomorrow = today.add({ days: 1 });
const nextWeek = today.add({ days: 7 });

console.log('English:');
console.log('  1 day ago       ->', formatRelative(yesterday, today));
console.log('  7 days ago      ->', formatRelative(lastWeek, today));
console.log('  1 day from now  ->', formatRelative(tomorrow, today));
console.log('  7 days from now ->', formatRelative(nextWeek, today));

console.log('\nGerman (de-DE):');
console.log('  1 day ago       ->', formatRelative(yesterday, today, { locale: 'de-DE' }));
console.log('  7 days ago      ->', formatRelative(lastWeek, today, { locale: 'de-DE' }));
console.log('  1 day from now  ->', formatRelative(tomorrow, today, { locale: 'de-DE' }));
console.log('  7 days from now ->', formatRelative(nextWeek, today, { locale: 'de-DE' }));`,

            nextday: `import { nextDay } from 'temporal-kit';

const today = Temporal.Now.plainDateISO();

// 1=Monday, 5=Friday, 7=Sunday
const nextFriday = nextDay(today, 5);
const nextMonday = nextDay(today, 1);

console.log('Today:', today.toString());
console.log('Next Friday:', nextFriday.toString());
console.log('Next Monday:', nextMonday.toString());

const daysUntil = nextFriday.since(today).days;
console.log(\`\${daysUntil} days until Friday\`);`,

            sort: `import { sortAsc } from 'temporal-kit';

// Unsorted meeting dates
const meetings = [
  Temporal.PlainDate.from('2025-12-15'),
  Temporal.PlainDate.from('2025-12-05'),
  Temporal.PlainDate.from('2025-12-20'),
  Temporal.PlainDate.from('2025-12-01')
];

console.log('Unsorted:');
meetings.forEach(d => console.log('  ' + d.toString()));

const sorted = sortAsc(meetings);

console.log('\nSorted (ascending):');
sorted.forEach(d => console.log('  ' + d.toString()));`,

            closest: `import { closestTo } from 'temporal-kit';

const target = Temporal.PlainDate.from('2025-12-10');

const events = [
  Temporal.PlainDate.from('2025-12-01'),
  Temporal.PlainDate.from('2025-12-15'),
  Temporal.PlainDate.from('2025-12-20')
];

console.log('Target date:', target.toString());
console.log('\nAvailable dates:');
events.forEach(d => console.log('  ' + d.toString()));

const nearest = closestTo(target, events);

console.log('\nClosest date:', nearest.toString());`,

            guards: `import { isPlainDate, isZonedDateTime } from 'temporal-kit';

const date = Temporal.PlainDate.from('2025-11-30');
const zoned = Temporal.Now.zonedDateTimeISO();

console.log('PlainDate:', date.toString());
console.log('  isPlainDate?', isPlainDate(date));
console.log('  isZonedDateTime?', isZonedDateTime(date));

console.log('\nZonedDateTime:', zoned.toString());
console.log('  isZonedDateTime?', isZonedDateTime(zoned));`,

            business: `import { addBusinessDays, isWeekend } from 'temporal-kit';

const friday = Temporal.PlainDate.from('2025-10-03');
console.log(\`Start date: \${friday.toString()} (\${isWeekend(friday) ? "Weekend" : "Weekday"})\`);

// Adding 1 business day to Friday skips Saturday/Sunday
const nextBusinessDay = addBusinessDays(friday, 1);
console.log(\`Next business day: \${nextBusinessDay.toString()}\`);

// Adding 3 business days (Fri -> Mon, Tue, Wed)
const threeBusinessDays = addBusinessDays(friday, 3);
console.log(\`+3 business days: \${threeBusinessDays.toString()}\`);

const saturday = Temporal.PlainDate.from('2025-10-04');
console.log(\`\\nChecking Saturday \${saturday.toString()}: \${isWeekend(saturday) ? "Weekend" : "Weekday"}\`);`,

            recipes: `import { add, startOf, nextDay } from 'temporal-kit';

const now = Temporal.Now.zonedDateTimeISO();
console.log(\`Start Date: \${now}\`);

// 1. Find next Friday
// We use the 'nextDay' helper (1=Monday, ..., 5=Friday)
const nextFriday = nextDay(now, 5);

console.log('\\n1. Next Friday calculation:');
console.log(\`Result: \${nextFriday}\`);

// 2. Simple Arithmetic
const nextMonth = add(now, { months: 1 });
const startOfYear = startOf(now, 'year');

console.log('\\n2. Simple operations:');
console.log(\`Next Month: \${nextMonth}\`);
console.log(\`Start of Year: \${startOfYear}\`);`,

            timezones: `const instant = Temporal.Now.instant();

const timezones = [
  'Europe/Berlin',
  'America/New_York', 
  'Asia/Tokyo',
  'UTC'
];

timezones.forEach(tz => {
  const zoned = instant.toZonedDateTimeISO(tz);
  // Note how the hour changes, but it's the same moment
  console.log(\`\${tz.padEnd(18)} -> \${zoned}\`);
});

// Your local timezone
const local = Temporal.Now.zonedDateTimeISO();
console.log('\nYour timezone:', local.timeZoneId);
console.log('Offset:', local.offset);`,

            collections: `import { sortAsc, closestTo } from 'temporal-kit';

// Scenario: Sort upcoming meetings by date
const meetings = [
  Temporal.PlainDate.from('2025-12-15'),
  Temporal.PlainDate.from('2025-12-05'),
  Temporal.PlainDate.from('2025-12-20'),
  Temporal.PlainDate.from('2025-12-01')
];

console.log('Unsorted meetings:');
meetings.forEach(m => console.log(\`  \${m.toString()}\`));

const sorted = sortAsc(meetings);
console.log('\\nSorted meetings:');
sorted.forEach(m => console.log(\`  \${m.toString()}\`));

// Find the closest meeting to a target date
const targetDate = Temporal.PlainDate.from('2025-12-10');
const nearest = closestTo(targetDate, meetings);

console.log(\`\\nClosest meeting to \${targetDate.toString()}:\`);
console.log(\`  -> \${nearest.toString()}\`);`,

            ranges: `import { isBetween, clamp } from 'temporal-kit';

const now = Temporal.Now.plainDateISO();
const start = now.subtract({ days: 5 });
const end = now.add({ days: 5 });

console.log(\`Range: \${start.toString()} to \${end.toString()}\`);

// 1. Check if date is in range
// isBetween returns true if the date is within the range (inclusive)
const check1 = isBetween(now, start, end);
const check2 = isBetween(
  now.add({ days: 10 }), 
  start, 
  end
);

console.log(\`Is \${now.toString()} in range? \${check1}\`);
console.log(\`Is \${now.add({ days: 10 }).toString()} in range? \${check2}\`);

// 2. Clamp date to range
// clamp ensures a date stays within the min/max limits.
// If it's before min, it returns min. If after max, it returns max.
const tooEarly = now.subtract({ days: 10 });
const tooLate = now.add({ days: 10 });

const clamped1 = clamp(tooEarly, start, end);
const clamped2 = clamp(tooLate, start, end);

console.log(\`\nClamping \${tooEarly.toString()} (too early) -> \${clamped1.toString()}\`);
console.log(\`Clamping \${tooLate.toString()} (too late)  -> \${clamped2.toString()}\`);`
        };
        
        const exampleMeta = {
            relative: {
                title: 'Relative Time',
                description: 'Convert dates to human-readable relative time like "yesterday" or "in 2 weeks". Perfect for activity feeds and notifications.'
            },
            nextday: {
                title: 'Find Next Weekday',
                description: 'Find the next occurrence of any weekday. Great for scheduling and planning features.'
            },
            sort: {
                title: 'Sort Dates',
                description: 'Sort arrays of dates in ascending or descending order. Essential for timeline views and event lists.'
            },
            closest: {
                title: 'Find Closest Date',
                description: 'Find which date in an array is closest to a target date. Useful for "find nearest appointment" features.'
            },
            timezones: {
                title: 'Timezones',
                description: 'Work with the same moment in time across different timezones. The same instant appears as different local times.'
            },
            clamp: {
                title: 'Limit Dates to Range',
                description: 'Keep dates within allowed boundaries. If a date is outside min/max limits, it gets adjusted to the nearest boundary.'
            },
            guards: {
                title: 'Type Guards',
                description: 'Runtime type checking for Temporal objects. Useful when working with mixed date types or validating API responses.'
            },
            business: {
                title: 'Business Days',
                description: 'Calculate delivery dates or deadlines by skipping weekends. Essential for business logic.'
            }
        };
        
        function highlightCode(code) {
            return code.replace(/(\/\/.*)/g, '<span class="comment">$1</span>');
        }
        
        function renderAllExamples() {
            const container = document.getElementById('examplesContainer');
            const exampleNames = ['relative', 'nextday', 'business', 'sort', 'closest', 'timezones', 'guards'];
            
            exampleNames.forEach(name => {
                const meta = exampleMeta[name];
                const code = exampleCode[name];
                
                const card = document.createElement('div');
                card.className = 'example-card';
                card.id = `example-${name}`;
                
                card.innerHTML = `
                    <div class="example-header">
                        <div class="example-title">
                            <h3>${meta.title}</h3>
                            <p>${meta.description}</p>
                        </div>
                        <button class="rerun-btn" onclick="runExample('${name}')">‚ñ∂ Run</button>
                    </div>
                    <div class="code-output-grid">
                        <div class="code-block">
                            <h4>Code</h4>
                            <div class="code-content">${highlightCode(code)}</div>
                        </div>
                        <div class="output-block">
                            <h4>Output</h4>
                            <div class="output-content" id="output-${name}"></div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            // Run all examples initially
            exampleNames.forEach(name => { runExample(name); });
        }
        
        const examples = {
            relative: () => {
                const output = [];
                
                const { formatRelative } = window.temporalKit;
                const today = Temporal.Now.plainDateISO();
                
                const yesterday = today.subtract({ days: 1 });
                const lastWeek = today.subtract({ days: 7 });
                const tomorrow = today.add({ days: 1 });
                const nextWeek = today.add({ days: 7 });
                
                output.push('English:');
                output.push(`  1 day ago       -> ${formatRelative(yesterday, today)}`);
                output.push(`  7 days ago      -> ${formatRelative(lastWeek, today)}`);
                output.push(`  1 day from now  -> ${formatRelative(tomorrow, today)}`);
                output.push(`  7 days from now -> ${formatRelative(nextWeek, today)}`);
                
                output.push('\nGerman (de-DE):');
                output.push(`  1 day ago       -> ${formatRelative(yesterday, today, { locale: 'de-DE' })}`);
                output.push(`  7 days ago      -> ${formatRelative(lastWeek, today, { locale: 'de-DE' })}`);
                output.push(`  1 day from now  -> ${formatRelative(tomorrow, today, { locale: 'de-DE' })}`);
                output.push(`  7 days from now -> ${formatRelative(nextWeek, today, { locale: 'de-DE' })}`);
                
                return output.join('\n');
            },

            nextday: () => {
                const output = [];
                
                const { nextDay } = window.temporalKit;
                const today = Temporal.Now.plainDateISO();
                
                const nextFriday = nextDay(today, 5);
                const nextMonday = nextDay(today, 1);
                
                output.push(`Today: ${today.toString()}`);
                output.push(`Next Friday: ${nextFriday.toString()}`);
                output.push(`Next Monday: ${nextMonday.toString()}`);
                
                const daysUntil = nextFriday.since(today).days;
                output.push(`\n${daysUntil} days until Friday`);
                
                return output.join('\n');
            },

            sort: () => {
                const output = [];
                
                const { sortAsc } = window.temporalKit;
                
                const meetings = [
                  Temporal.PlainDate.from('2025-12-15'),
                  Temporal.PlainDate.from('2025-12-05'),
                  Temporal.PlainDate.from('2025-12-20'),
                  Temporal.PlainDate.from('2025-12-01')
                ];
                
                output.push('Unsorted:');
                meetings.forEach(d => { output.push(`  ${d.toString()}`); });
                
                const sorted = sortAsc(meetings);
                
                output.push('\nSorted (ascending):');
                sorted.forEach(d => { output.push(`  ${d.toString()}`); });
                
                return output.join('\n');
            },

            closest: () => {
                const output = [];
                
                const { closestTo } = window.temporalKit;
                
                const target = Temporal.PlainDate.from('2025-12-10');
                
                const events = [
                  Temporal.PlainDate.from('2025-12-01'),
                  Temporal.PlainDate.from('2025-12-15'),
                  Temporal.PlainDate.from('2025-12-20')
                ];
                
                output.push(`Target date: ${target.toString()}`);
                output.push('\nAvailable dates:');
                events.forEach(d => { output.push(`  ${d.toString()}`); });
                
                const nearest = closestTo(target, events);
                
                output.push(`\nClosest date: ${nearest.toString()}`);
                
                return output.join('\n');
            },

            guards: () => {
                const output = [];
                
                const date = Temporal.PlainDate.from('2025-11-30');
                const zoned = Temporal.Now.zonedDateTimeISO();
                
                output.push(`PlainDate: ${date.toString()}`);
                output.push(`  isPlainDate? ${window.temporalKit.isPlainDate(date)}`);
                output.push(`  isZonedDateTime? ${window.temporalKit.isZonedDateTime(date)}`);
                
                output.push(`\nZonedDateTime: ${zoned.toString()}`);
                output.push(`  isZonedDateTime? ${window.temporalKit.isZonedDateTime(zoned)}`);
                
                return output.join('\n');
            },

            business: () => {
                const output = [];
                const { addBusinessDays, isWeekend } = window.temporalKit;

                const friday = Temporal.PlainDate.from('2025-10-03');
                output.push(`Start date: ${friday.toString()} (${isWeekend(friday) ? "Weekend" : "Weekday"})`);

                const nextBusinessDay = addBusinessDays(friday, 1);
                output.push(`Next business day: ${nextBusinessDay.toString()}`);

                const threeBusinessDays = addBusinessDays(friday, 3);
                output.push(`+3 business days: ${threeBusinessDays.toString()}`);

                const saturday = Temporal.PlainDate.from('2025-10-04');
                output.push(`\nChecking Saturday ${saturday.toString()}: ${isWeekend(saturday) ? "Weekend" : "Weekday"}`);

                return output.join('\n');
            },
            
            clamp: () => {
                const output = [];
                
                const { clamp } = window.temporalKit;
                const now = Temporal.Now.plainDateISO();
                const minDate = now.subtract({ days: 5 });
                const maxDate = now.add({ days: 5 });
                
                output.push(`Allowed range: ${minDate.toString()} to ${maxDate.toString()}`);
                
                const tooEarly = now.subtract({ days: 10 });
                const tooLate = now.add({ days: 10 });
                const justRight = now;
                
                output.push(`\nInput: ${tooEarly.toString()} -> Output: ${clamp(tooEarly, minDate, maxDate).toString()}`);
                output.push(`Input: ${tooLate.toString()}  -> Output: ${clamp(tooLate, minDate, maxDate).toString()}`);
                output.push(`Input: ${justRight.toString()} -> Output: ${clamp(justRight, minDate, maxDate).toString()}`);
                
                return output.join('\n');
            },
            
            timezones: () => {
                const output = [];
                
                const instant = Temporal.Now.instant();

                const timezones = ['Europe/Berlin', 'America/New_York', 'Asia/Tokyo', 'UTC'];
                
                timezones.forEach(tz => {
                    const zoned = instant.toZonedDateTimeISO(tz);
                    output.push(`${tz.padEnd(18)} -> ${zoned}`);
                });
                
                const local = Temporal.Now.zonedDateTimeISO();
                output.push(`\nYour timezone: ${local.timeZoneId}`);
                output.push(`Offset: ${local.offset}`);
                
                return output.join('\n');
            },

            ranges: () => {
                const output = [];
                
                const { isBetween, clamp } = window.temporalKit;
                const now = Temporal.Now.plainDateISO();
                const start = now.subtract({ days: 5 });
                const end = now.add({ days: 5 });
                
                output.push(`Range: ${start.toString()} to ${end.toString()}`);
                
                const check1 = isBetween(now, start, end);
                const check2 = isBetween(
                  now.add({ days: 10 }), 
                  start, 
                  end
                );
                
                output.push(`Is ${now.toString()} in range? ${check1}`);
                output.push(`Is ${now.add({ days: 10 }).toString()} in range? ${check2}`);
                
                const tooEarly = now.subtract({ days: 10 });
                const tooLate = now.add({ days: 10 });
                
                const clamped1 = clamp(tooEarly, start, end);
                const clamped2 = clamp(tooLate, start, end);
                
                output.push(`\nClamping ${tooEarly.toString()} (too early) -> ${clamped1.toString()}`);
                output.push(`Clamping ${tooLate.toString()} (too late)  -> ${clamped2.toString()}`);
                
                return output.join('\n');
            }
        };
        
        window.runExample = (exampleName) => {
            const output = document.getElementById(`output-${exampleName}`);
            
            try {
                output.textContent = examples[exampleName]();
            } catch (error) {
                output.textContent = `‚ùå Error: ${error.message}\n\n${error.stack}`;
            }
        };
        
        window.copyInstall = () => {
            navigator.clipboard.writeText('npm install temporal-kit');
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'Copied!';
            setTimeout(() => { btn.textContent = originalText; }, 2000);
        };

        // Initialize examples
        renderAllExamples();
    </script>
</body>
</html>
